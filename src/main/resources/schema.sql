CREATE TABLE IF NOT EXISTS REGISTERED_USER (
    ID IDENTITY,
    USERNAME varchar(64) NOT NULL CHECK (CHAR_LENGTH(USERNAME) > 8) UNIQUE,
    EMAIL varchar(256) NOT NULL CHECK (CHAR_LENGTH(EMAIL) > 3) UNIQUE,
    ENCODED_PASSWORD varchar(80) NOT NULL,
    ENABLED BOOL NOT NULL,
    CREATED_AT DATE NOT NULL DEFAULT CURRENT_DATE
);

CREATE TABLE IF NOT EXISTS USER_AUTHORITIES (
    USER_ID IDENTITY NOT NULL,
    AUTHORITY VARCHAR(64) NOT NULL,
    CONSTRAINT PK_USER_AUTHORITIES PRIMARY KEY (USER_ID, AUTHORITY),
    CONSTRAINT FK_AUTHORITIES_USERS FOREIGN KEY(USER_ID) REFERENCES REGISTERED_USER(ID)
)